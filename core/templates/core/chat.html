{% extends "core/base.html" %}

{% block content %}
<div class="govuk-width-container">
  <main class="govuk-main-wrapper">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-one-third">
          <a href={% url 'chat-new' %}><button type="submit" class="govuk-button" data-module="govuk-button">New Chat</button></a>
          <h3 class="govuk-heading-s">your previous chats</h3>
          <ul class="govuk-list">
            {% for chat in chat_history %}
            <li>
                {% url 'chat-detail' chat.pk as link %}
                <a class="govuk-link" href="{{ link }}">{{ chat }}</a>
            </li>
            {% endfor %}
          </ul>
      </div>
      <div class="govuk-grid-column-two-thirds">
        <div id="messages" class="messageBox">
        {% for message in chat.chatmessage_set.all %}
            {% if message.type == 'ai' %}
               <div class="aiMessage"><pre>@malcom.tucker: {{ message.annotated_content }}</pre></div>
                <hr class="govuk-section-break govuk-section-break--visible">
            {% else %}
               <div class="userMessage"><pre><b>@me: {{ message.content }}</b></pre></div>
            {% endif %}
        {% endfor %}
        </div>
          <div class="govuk-form-group">
            <input class="govuk-input" id="messageInput" name="eventName" type="text" placeholder="Enter message">
            <button onclick="sendMessage()" class="govuk-button">Send</button>
        </div>
      </div>
    </div>
  </main>
</div>
{% endblock %}

